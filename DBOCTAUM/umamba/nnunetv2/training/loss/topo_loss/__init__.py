# generate skeleton aware weighted map